{
	"info": {
		"_postman_id": "location-voitures-api",
		"name": "Location Voitures API",
		"description": "Collection complète pour tester l'API de location de voitures",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Authentification",
			"item": [
				{
					"name": "Register - Client",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"authToken\", jsonData.token);",
									"    pm.environment.set(\"userId\", jsonData.user.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nom\": \"Dupont\",\n    \"prenom\": \"Jean\",\n    \"email\": \"jean.dupont@example.com\",\n    \"motDePasse\": \"Password123!\",\n    \"typeUtilisateur\": \"CLIENT\",\n    \"telephone\": \"0612345678\",\n    \"adresse\": \"123 Rue de la Paix, Paris\",\n    \"numeroPermis\": \"PER123456789\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/register",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "register"]
						}
					}
				},
				{
					"name": "Register - Employé",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"authToken\", jsonData.token);",
									"    pm.environment.set(\"userId\", jsonData.user.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"nom\": \"Martin\",\n    \"prenom\": \"Sophie\",\n    \"email\": \"sophie.martin@example.com\",\n    \"motDePasse\": \"Password123!\",\n    \"typeUtilisateur\": \"EMPLOYE\",\n    \"matricule\": \"EMP001\",\n    \"dateEmbauche\": \"2024-01-15\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/register",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "register"]
						}
					}
				},
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"authToken\", jsonData.token);",
									"    pm.environment.set(\"userId\", jsonData.user.id);",
									"    pm.environment.set(\"userType\", jsonData.user.typeUtilisateur);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"jean.dupont@example.com\",\n    \"motDePasse\": \"Password123!\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "login"]
						}
					}
				},
				{
					"name": "Refresh Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"refreshToken\": \"{{refreshToken}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/refresh-token",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "refresh-token"]
						}
					}
				}
			]
		},
		{
			"name": "Véhicules",
			"item": [
				{
					"name": "Get All Véhicules",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/vehicules",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vehicules"]
						}
					}
				},
				{
					"name": "Get Véhicules Disponibles",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/vehicules/disponibles?dateDebut=2024-12-01T00:00:00&dateFin=2024-12-10T00:00:00",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vehicules", "disponibles"],
							"query": [
								{
									"key": "dateDebut",
									"value": "2024-12-01T00:00:00"
								},
								{
									"key": "dateFin",
									"value": "2024-12-10T00:00:00"
								}
							]
						}
					}
				},
				{
					"name": "Get Véhicule by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/vehicules/1",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vehicules", "1"]
						}
					}
				},
				{
					"name": "Create Véhicule",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"marque\": \"Toyota\",\n    \"modele\": \"Corolla\",\n    \"immatriculation\": \"AB-123-CD\",\n    \"annee\": 2023,\n    \"couleur\": \"Blanc\",\n    \"prixJournalier\": 50.00,\n    \"estDisponible\": true,\n    \"kilometrage\": 15000,\n    \"typeVehiculeId\": 1\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/vehicules",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vehicules"]
						}
					}
				},
				{
					"name": "Update Véhicule",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": 1,\n    \"marque\": \"Toyota\",\n    \"modele\": \"Corolla\",\n    \"immatriculation\": \"AB-123-CD\",\n    \"annee\": 2023,\n    \"couleur\": \"Blanc\",\n    \"prixJournalier\": 55.00,\n    \"estDisponible\": true,\n    \"kilometrage\": 15000,\n    \"typeVehiculeId\": 1\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/vehicules/1",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vehicules", "1"]
						}
					}
				},
				{
					"name": "Upload Images Véhicule",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "files",
									"type": "file",
									"src": []
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/vehicules/1/upload-images",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vehicules", "1", "upload-images"]
						}
					}
				},
				{
					"name": "Delete Véhicule",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/vehicules/1",
							"host": ["{{baseUrl}}"],
							"path": ["api", "vehicules", "1"]
						}
					}
				}
			]
		},
		{
			"name": "Locations",
			"item": [
				{
					"name": "Get All Locations",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/locations",
							"host": ["{{baseUrl}}"],
							"path": ["api", "locations"]
						}
					}
				},
				{
					"name": "Get Location by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/locations/1",
							"host": ["{{baseUrl}}"],
							"path": ["api", "locations", "1"]
						}
					}
				},
				{
					"name": "Create Location",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"locationId\", jsonData.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"dateDebut\": \"2024-12-01T10:00:00\",\n    \"dateFin\": \"2024-12-05T18:00:00\",\n    \"clientId\": 1,\n    \"vehiculeId\": 1\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/locations",
							"host": ["{{baseUrl}}"],
							"path": ["api", "locations"]
						}
					}
				},
				{
					"name": "Update Location",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": 1,\n    \"dateDebut\": \"2024-12-01T10:00:00\",\n    \"dateFin\": \"2024-12-06T18:00:00\",\n    \"dureeJours\": 5,\n    \"montantTotal\": 250.00,\n    \"statut\": \"CONFIRMEE\",\n    \"clientId\": 1,\n    \"vehiculeId\": 1\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/locations/1",
							"host": ["{{baseUrl}}"],
							"path": ["api", "locations", "1"]
						}
					}
				},
				{
					"name": "Générer Facture",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/locations/{{locationId}}/generer-facture",
							"host": ["{{baseUrl}}"],
							"path": ["api", "locations", "{{locationId}}", "generer-facture"]
						}
					}
				},
				{
					"name": "Confirmer Location",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/locations/{{locationId}}/confirmer",
							"host": ["{{baseUrl}}"],
							"path": ["api", "locations", "{{locationId}}", "confirmer"]
						}
					}
				},
				{
					"name": "Annuler Location",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/locations/{{locationId}}/annuler",
							"host": ["{{baseUrl}}"],
							"path": ["api", "locations", "{{locationId}}", "annuler"]
						}
					}
				}
			]
		},
		{
			"name": "Paiements",
			"item": [
				{
					"name": "Create Paiement",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"paiementId\", jsonData.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"montant\": 250.00,\n    \"datePaiement\": \"2024-12-01T12:00:00\",\n    \"modePaiement\": \"CARTE_CREDIT\",\n    \"statut\": \"EN_ATTENTE\",\n    \"locationId\": 1\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/paiements",
							"host": ["{{baseUrl}}"],
							"path": ["api", "paiements"]
						}
					}
				},
				{
					"name": "Get Paiement by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/paiements/{{paiementId}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "paiements", "{{paiementId}}"]
						}
					}
				},
				{
					"name": "Update Statut Paiement",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\"VALIDE\""
						},
						"url": {
							"raw": "{{baseUrl}}/api/paiements/{{paiementId}}/statut",
							"host": ["{{baseUrl}}"],
							"path": ["api", "paiements", "{{paiementId}}", "statut"]
						}
					}
				},
				{
					"name": "Générer Reçu PDF",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/paiements/{{paiementId}}/recu",
							"host": ["{{baseUrl}}"],
							"path": ["api", "paiements", "{{paiementId}}", "recu"]
						}
					}
				}
			]
		},
		{
			"name": "Entretiens",
			"item": [
				{
					"name": "Get All Entretiens",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/entretiens",
							"host": ["{{baseUrl}}"],
							"path": ["api", "entretiens"]
						}
					}
				},
				{
					"name": "Get Entretiens Urgents",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/entretiens/urgents",
							"host": ["{{baseUrl}}"],
							"path": ["api", "entretiens", "urgents"]
						}
					}
				},
				{
					"name": "Get Entretien by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/entretiens/1",
							"host": ["{{baseUrl}}"],
							"path": ["api", "entretiens", "1"]
						}
					}
				},
				{
					"name": "Create Entretien",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"entretienId\", jsonData.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"dateEntretien\": \"2024-12-15T09:00:00\",\n    \"typeEntretien\": \"REVISION_PERIODIQUE\",\n    \"description\": \"Révision périodique de 15000 km\",\n    \"cout\": 150.00,\n    \"prochainEntretien\": \"2025-03-15T09:00:00\",\n    \"estUrgent\": false,\n    \"statut\": \"PLANIFIE\",\n    \"vehiculeId\": 1,\n    \"employeId\": null\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/entretiens",
							"host": ["{{baseUrl}}"],
							"path": ["api", "entretiens"]
						}
					}
				},
				{
					"name": "Update Entretien",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": 1,\n    \"dateEntretien\": \"2024-12-15T09:00:00\",\n    \"typeEntretien\": \"REVISION_PERIODIQUE\",\n    \"description\": \"Révision périodique de 15000 km\",\n    \"cout\": 150.00,\n    \"prochainEntretien\": \"2025-03-15T09:00:00\",\n    \"estUrgent\": true,\n    \"statut\": \"EN_COURS\",\n    \"vehiculeId\": 1,\n    \"employeId\": 1\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/entretiens/1",
							"host": ["{{baseUrl}}"],
							"path": ["api", "entretiens", "1"]
						}
					}
				},
				{
					"name": "Terminer Entretien",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/entretiens/{{entretienId}}/terminer",
							"host": ["{{baseUrl}}"],
							"path": ["api", "entretiens", "{{entretienId}}", "terminer"]
						}
					}
				},
				{
					"name": "Delete Entretien",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/entretiens/{{entretienId}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "entretiens", "{{entretienId}}"]
						}
					}
				}
			]
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "https://localhost:5001",
			"type": "string"
		},
		{
			"key": "authToken",
			"value": "",
			"type": "string"
		}
	]
}

